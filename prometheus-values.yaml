prometheus:
  thanosIngress:
    hosts: ["prometheus.${NGINX_DOMAIN}"]
    paths: [/thanos]
  ingress:
    enabled: true
    hosts: ["prometheus.${NGINX_DOMAIN}"]
    paths: [/]
  prometheusSpec:
    ruleSelectorNilUsesHelmValues: false
    serviceMonitorSelectorNilUsesHelmValues: false
    podMonitorSelectorNilUsesHelmValues: false
    probeSelectorNilUsesHelmValues: false
    routePrefix: /

alertmanager:
  ingress:
    enabled: true
    hosts: ["prometheus.${NGINX_DOMAIN}"]
    paths: [/alertmanager]
  alertmanagerSpec:
    routePrefix: /alertmanager

grafana:
  adminPassword: prom-operator
  ingress:
    enabled: true
    hosts: ["grafana.${NGINX_DOMAIN}"]
    path: /
  sidecar:
    dashboards:
      provider:
        allowUiUpdates: true
  env:
    GF_PLUGINS_ALLOW_LOADING_UNSIGNED_PLUGINS: pgillich-tree-panel
  plugins:
   - marcusolsson-json-datasource
   - pgillich-tree-panel
  additionalDataSources:
    - name: K8s API
      type: marcusolsson-json-datasource
      url: http://kubectl-proxy
    - name: K8s log API
      type: marcusolsson-json-datasource
      url: http://kubectl-proxy:8002
    - name: K8s ext API
      type: marcusolsson-json-datasource
      url: http://kubectl-proxy:8003
  extraEmptyDirMounts:
    - name: grafana-plugins
      mountPath: /var/lib/grafana/plugins
  grafana.ini:
    server:
      domain: "${OAM_DOMAIN}"
      root_url: "%(protocol)s://%(domain)s/grafana"
      serve_from_sub_path: true

