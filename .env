# Can be: k3s, micro, kind, vagrant
K8S_DISTRIBUTION ?= kind

CLUSTER_NAME ?= demo

K3S_VERSION ?= v1.19.5+k3s2
# The default port is in conflict with KinD
K3S_SERVER_PORT ?= 26443
K3S_WAIT ?= 2m

# Keep kind-config*.yaml in sync with below version
KIND_VERSION ?= v0.17.0
KIND_WAIT ?= 2m
KIND_CONFIG ?= kind-config.yaml

EXTERNAL_DOMAIN ?= ${K8S_DISTRIBUTION}-01.company.com

MICRO_VERSION ?= 1.19/stable
MICRO_SNAP_DATA ?= /var/snap/microk8s/current
MICRO_WAIT ?= 2m

# If true, alias to vagrant in Docker is registered in ~/.bashrc
DO_VAGRANT_ALIAS ?= false

DO_METALLB ?= true
# K3s does not use MetalLB
METALLB_VERSION ?= v0.12.1
ifeq (${K8S_DISTRIBUTION}, vagrant)
METALLB_POOL ?= 192.168.26.128/25
else ifeq (${K8S_DISTRIBUTION}, micro)
METALLB_POOL ?= 172.18.2.128/25
else
METALLB_POOL ?= $$(docker network inspect -f '{{range .IPAM.Config }}{{ .Gateway }}{{end}}' kind | cut -d '.' -f1,2).255.128/25
endif
METALLB_WAIT ?= 1m

DO_CNI ?= true

ISTIO_VERSION ?= 1.15.3
ISTIO_WAIT ?= 1m

# Used only for Windows install
HELM_VERSION ?= v3.4.2

NFS_WAIT ?= 1m

METRICS_VERSION ?= 3.8.2
METRICS_WAIT ?= 1m

DASHBOARD_VERSION ?= v2.6.1
DASHBOARD_WAIT ?= 1m

# If true, Prometheus and relations will be deployed
DO_PROMETHEUS ?= true
PROMETHEUS_CHART_VERSION ?= 40.5.0
PROMETHEUS_HELM_RELEASE_NAME = prometheus-stack
PROMETHEUS_NAMESPACE = monitoring
PROMETHEUS_WAIT ?= 2m
